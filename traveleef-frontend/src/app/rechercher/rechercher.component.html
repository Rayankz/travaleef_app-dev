<div class="recherche-container">
  <h1>Recherche :</h1>

  <!-- Formulaire de recherche -->
  <div class="formulaire-recherche">
    <input type="text" placeholder="Départ (ex: CDG)" [(ngModel)]="departureId" />
    <input type="text" placeholder="Arrivée (ex: JFK)" [(ngModel)]="arrivalId" />
    <input type="date" placeholder="Date de départ" [(ngModel)]="outboundDate" />
    <input type="date" placeholder="Date d'arrivée" [(ngModel)]="returnDate" />
    <input type="number" placeholder="Nombre de passagers" min="1" [(ngModel)]="passengerCount" />
    <button (click)="rechercherVols()">Rechercher</button>
  </div>

  <!-- Affichage des erreurs -->
  @if (errorMessage) {
    <div class="error-message">{{ errorMessage }}</div>
  }

  <div class="contenu-recherche">
    <!-- Résultats -->
    <div class="resultats">
      <h2>Résultats :</h2>

      @for (flight of results; track flight) {
        <div class="resultat">
          <h3>
            {{ flight.flights[0]?.departure_airport?.name }} ➡️
            {{ flight.flights[0]?.arrival_airport?.name }}
            <span>{{ flight.total_duration }} min</span>
          </h3>
          <p>
            {{ flight.carbon_emissions?.this_flight }} kg CO₂/Pers. - Transports :
            <span *ngIf="flight.airline_logo">
              <img [src]="flight.airline_logo" alt="Logo Compagnie" width="30" />
            </span>
          </p>
          <div class="details">
            <p>
              <strong>{{ flight.flights[0]?.departure_airport?.id }}</strong> ➡️
              {{ flight.flights[0]?.arrival_airport?.id }}
            </p>
            <p>{{ flight.price }}€/pers.</p>
          </div>
        </div>
      }
    </div>

    <!-- Filtres -->
    <div class="filtres">
      <h3>Filtre</h3>
      <div class="filtre-item">
        <label>Tranche de prix</label>
        <input type="range" min="0" max="2000" />
      </div>
    </div>
  </div>
</div>
